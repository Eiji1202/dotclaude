import { describe, expect, test } from "@jest/globals";
import type { TradingCardMapper } from "~/graphql/pack/schema.mappers";
import { sortCards } from ".";

describe("usecase/pack#sortedCards", () => {
  test("should sort cards by name and benefit", () => {
    const cards: TradingCardMapper[] = [
      {
        name: "[002/SR] OZworld (Off-shot)",
        backImageURL: "",
        viewerOwnedCount: 0,
        id: "",
        imageURL: "",
        isSoldOut: false,
        maxCount: null,
        usedImageURL: null,
        benefitId: 2,
        group: null,
        tenantId: "default-tenant",
        revealedAt: new Date(),
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        name: "[002/SR] OZworld (Off-shot)",
        backImageURL: "",
        viewerOwnedCount: 0,
        id: "",
        imageURL: "",
        isSoldOut: false,
        maxCount: null,
        usedImageURL: null,
        benefitId: null,
        group: null,
        tenantId: "default-tenant",
        revealedAt: new Date(),
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        name: "[001/UR] OZworld",
        backImageURL: "",
        viewerOwnedCount: 0,
        id: "",
        imageURL: "",
        isSoldOut: false,
        maxCount: null,
        usedImageURL: null,
        benefitId: null,
        group: null,
        tenantId: "default-tenant",
        revealedAt: new Date(),
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        name: "[001/UR] OZworld",
        backImageURL: "",
        viewerOwnedCount: 0,
        id: "",
        imageURL: "",
        isSoldOut: false,
        maxCount: null,
        usedImageURL: null,
        benefitId: 1,
        group: null,
        tenantId: "default-tenant",
        revealedAt: new Date(),
        createdAt: new Date(),
        updatedAt: new Date(),
      },
      {
        name: "[003/UC] HABUSH",
        backImageURL: "",
        viewerOwnedCount: 0,
        id: "",
        imageURL: "",
        isSoldOut: false,
        maxCount: null,
        usedImageURL: null,
        benefitId: null,
        group: null,
        tenantId: "default-tenant",
        revealedAt: new Date(),
        createdAt: new Date(),
        updatedAt: new Date(),
      },
    ];
    const sortedCards = sortCards(cards);
    expect(sortedCards.at(0)).toEqual({
      name: "[001/UR] OZworld",
      backImageURL: "",
      viewerOwnedCount: 0,
      id: "",
      imageURL: "",
      isSoldOut: false,
      maxCount: null,
      usedImageURL: null,
      benefitId: null,
      group: null,
      tenantId: "default-tenant",
      revealedAt: expect.any(Date),
      createdAt: expect.any(Date),
      updatedAt: expect.any(Date),
    });
    expect(sortedCards.at(1)).toEqual({
      name: "[001/UR] OZworld",
      backImageURL: "",
      viewerOwnedCount: 0,
      id: "",
      imageURL: "",
      isSoldOut: false,
      maxCount: null,
      usedImageURL: null,
      benefitId: 1,
      group: null,
      tenantId: "default-tenant",
      revealedAt: expect.any(Date),
      createdAt: expect.any(Date),
      updatedAt: expect.any(Date),
    });
    expect(sortedCards.at(2)).toEqual({
      name: "[002/SR] OZworld (Off-shot)",
      backImageURL: "",
      viewerOwnedCount: 0,
      id: "",
      imageURL: "",
      isSoldOut: false,
      maxCount: null,
      usedImageURL: null,
      benefitId: null,
      group: null,
      tenantId: "default-tenant",
      revealedAt: expect.any(Date),
      createdAt: expect.any(Date),
      updatedAt: expect.any(Date),
    });
    expect(sortedCards.at(3)).toEqual({
      name: "[002/SR] OZworld (Off-shot)",
      backImageURL: "",
      viewerOwnedCount: 0,
      id: "",
      imageURL: "",
      isSoldOut: false,
      maxCount: null,
      usedImageURL: null,
      benefitId: 2,
      group: null,
      tenantId: "default-tenant",
      revealedAt: expect.any(Date),
      createdAt: expect.any(Date),
      updatedAt: expect.any(Date),
    });
    expect(sortedCards.at(4)).toEqual({
      name: "[003/UC] HABUSH",
      backImageURL: "",
      viewerOwnedCount: 0,
      id: "",
      imageURL: "",
      isSoldOut: false,
      maxCount: null,
      usedImageURL: null,
      benefitId: null,
      group: null,
      tenantId: "default-tenant",
      revealedAt: expect.any(Date),
      createdAt: expect.any(Date),
      updatedAt: expect.any(Date),
    });
  });
});
